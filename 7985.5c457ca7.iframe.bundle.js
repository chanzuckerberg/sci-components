"use strict";(self.webpackChunk_czi_sds_monorepo=self.webpackChunk_czi_sds_monorepo||[]).push([[7985],{"./node_modules/chroma-js/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ay:()=>chroma_js});const{min,max}=Math,limit=(x,low=0,high=1)=>min(max(low,x),high),clip_rgb=rgb=>{rgb._clipped=!1,rgb._unclipped=rgb.slice(0);for(let i=0;i<=3;i++)i<3?((rgb[i]<0||rgb[i]>255)&&(rgb._clipped=!0),rgb[i]=limit(rgb[i],0,255)):3===i&&(rgb[i]=limit(rgb[i],0,1));return rgb},classToType={};for(let name of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])classToType[`[object ${name}]`]=name.toLowerCase();function type(obj){return classToType[Object.prototype.toString.call(obj)]||"object"}const unpack=(args,keyOrder=null)=>args.length>=3?Array.prototype.slice.call(args):"object"==type(args[0])&&keyOrder?keyOrder.split("").filter(k=>void 0!==args[0][k]).map(k=>args[0][k]):args[0].slice(0),last=args=>{if(args.length<2)return null;const l=args.length-1;return"string"==type(args[l])?args[l].toLowerCase():null},{PI,min:utils_min,max:utils_max}=Math,rnd2=a=>Math.round(100*a)/100,rnd3=a=>Math.round(100*a)/100,TWOPI=2*PI,PITHIRD=PI/3,DEG2RAD=PI/180,RAD2DEG=180/PI;function reverse3(arr){return[...arr.slice(0,3).reverse(),...arr.slice(3)]}const input={format:{},autodetect:[]};const src_Color=class Color{constructor(...args){const me=this;if("object"===type(args[0])&&args[0].constructor&&args[0].constructor===this.constructor)return args[0];let mode=last(args),autodetect=!1;if(!mode){autodetect=!0,input.sorted||(input.autodetect=input.autodetect.sort((a,b)=>b.p-a.p),input.sorted=!0);for(let chk of input.autodetect)if(mode=chk.test(...args),mode)break}if(!input.format[mode])throw new Error("unknown format: "+args);{const rgb=input.format[mode].apply(null,autodetect?args:args.slice(0,-1));me._rgb=clip_rgb(rgb)}3===me._rgb.length&&me._rgb.push(1)}toString(){return"function"==type(this.hex)?this.hex():`[${this._rgb.join(",")}]`}},chroma=(...args)=>new src_Color(...args);chroma.version="3.2.0";const src_chroma=chroma,colors_w3cx11={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},RE_HEX=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,RE_HEXA=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,hex_hex2rgb=hex=>{if(hex.match(RE_HEX)){4!==hex.length&&7!==hex.length||(hex=hex.substr(1)),3===hex.length&&(hex=(hex=hex.split(""))[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]);const u=parseInt(hex,16);return[u>>16,u>>8&255,255&u,1]}if(hex.match(RE_HEXA)){5!==hex.length&&9!==hex.length||(hex=hex.substr(1)),4===hex.length&&(hex=(hex=hex.split(""))[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]+hex[3]+hex[3]);const u=parseInt(hex,16);return[u>>24&255,u>>16&255,u>>8&255,Math.round((255&u)/255*100)/100]}throw new Error(`unknown hex color: ${hex}`)},{round}=Math,hex_rgb2hex=(...args)=>{let[r,g,b,a]=unpack(args,"rgba"),mode=last(args)||"auto";void 0===a&&(a=1),"auto"===mode&&(mode=a<1?"rgba":"rgb"),r=round(r),g=round(g),b=round(b);let str="000000"+(r<<16|g<<8|b).toString(16);str=str.substr(str.length-6);let hxa="0"+round(255*a).toString(16);switch(hxa=hxa.substr(hxa.length-2),mode.toLowerCase()){case"rgba":return`#${str}${hxa}`;case"argb":return`#${hxa}${str}`;default:return`#${str}`}};src_Color.prototype.name=function(){const hex=hex_rgb2hex(this._rgb,"rgb");for(let n of Object.keys(colors_w3cx11))if(colors_w3cx11[n]===hex)return n.toLowerCase();return hex},input.format.named=name=>{if(name=name.toLowerCase(),colors_w3cx11[name])return hex_hex2rgb(colors_w3cx11[name]);throw new Error("unknown color name: "+name)},input.autodetect.push({p:5,test:(h,...rest)=>{if(!rest.length&&"string"===type(h)&&colors_w3cx11[h.toLowerCase()])return"named"}}),src_Color.prototype.alpha=function(a,mutate=!1){return void 0!==a&&"number"===type(a)?mutate?(this._rgb[3]=a,this):new src_Color([this._rgb[0],this._rgb[1],this._rgb[2],a],"rgb"):this._rgb[3]},src_Color.prototype.clipped=function(){return this._rgb._clipped||!1};const labConstants={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},lab_constants=labConstants,ILLUMINANTS=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function setLabWhitePoint(name){const ill=ILLUMINANTS.get(String(name).toLowerCase());if(!ill)throw new Error("unknown Lab illuminant "+name);labConstants.labWhitePoint=name,labConstants.Xn=ill[0],labConstants.Zn=ill[1]}function getLabWhitePoint(){return labConstants.labWhitePoint}const lab2xyz=(L,a,b)=>{const{kE,kK,kKE,Xn,Yn,Zn}=lab_constants,fy=(L+16)/116,fx=.002*a+fy,fz=fy-.005*b,fx3=fx*fx*fx,fz3=fz*fz*fz;return[(fx3>kE?fx3:(116*fx-16)/kK)*Xn,(L>kKE?Math.pow((L+16)/116,3):L/kK)*Yn,(fz3>kE?fz3:(116*fz-16)/kK)*Zn]},compand=linear=>{const sign=Math.sign(linear);return((linear=Math.abs(linear))<=.0031308?12.92*linear:1.055*Math.pow(linear,1/2.4)-.055)*sign},xyz2rgb=(x,y,z)=>{const{MtxAdaptMa,MtxAdaptMaI,MtxXYZ2RGB,RefWhiteRGB,Xn,Yn,Zn}=lab_constants,As=Xn*MtxAdaptMa.m00+Yn*MtxAdaptMa.m10+Zn*MtxAdaptMa.m20,Bs=Xn*MtxAdaptMa.m01+Yn*MtxAdaptMa.m11+Zn*MtxAdaptMa.m21,Cs=Xn*MtxAdaptMa.m02+Yn*MtxAdaptMa.m12+Zn*MtxAdaptMa.m22,Ad=RefWhiteRGB.X*MtxAdaptMa.m00+RefWhiteRGB.Y*MtxAdaptMa.m10+RefWhiteRGB.Z*MtxAdaptMa.m20,Bd=RefWhiteRGB.X*MtxAdaptMa.m01+RefWhiteRGB.Y*MtxAdaptMa.m11+RefWhiteRGB.Z*MtxAdaptMa.m21,Cd=RefWhiteRGB.X*MtxAdaptMa.m02+RefWhiteRGB.Y*MtxAdaptMa.m12+RefWhiteRGB.Z*MtxAdaptMa.m22,X1=(x*MtxAdaptMa.m00+y*MtxAdaptMa.m10+z*MtxAdaptMa.m20)*(Ad/As),Y1=(x*MtxAdaptMa.m01+y*MtxAdaptMa.m11+z*MtxAdaptMa.m21)*(Bd/Bs),Z1=(x*MtxAdaptMa.m02+y*MtxAdaptMa.m12+z*MtxAdaptMa.m22)*(Cd/Cs),X2=X1*MtxAdaptMaI.m00+Y1*MtxAdaptMaI.m10+Z1*MtxAdaptMaI.m20,Y2=X1*MtxAdaptMaI.m01+Y1*MtxAdaptMaI.m11+Z1*MtxAdaptMaI.m21,Z2=X1*MtxAdaptMaI.m02+Y1*MtxAdaptMaI.m12+Z1*MtxAdaptMaI.m22;return[255*compand(X2*MtxXYZ2RGB.m00+Y2*MtxXYZ2RGB.m10+Z2*MtxXYZ2RGB.m20),255*compand(X2*MtxXYZ2RGB.m01+Y2*MtxXYZ2RGB.m11+Z2*MtxXYZ2RGB.m21),255*compand(X2*MtxXYZ2RGB.m02+Y2*MtxXYZ2RGB.m12+Z2*MtxXYZ2RGB.m22)]},lab_lab2rgb=(...args)=>{args=unpack(args,"lab");const[L,a,b]=args,[x,y,z]=lab2xyz(L,a,b),[r,g,b_]=xyz2rgb(x,y,z);return[r,g,b_,args.length>3?args[3]:1]};function gammaAdjustSRGB(companded){const sign=Math.sign(companded);return((companded=Math.abs(companded))<=.04045?companded/12.92:Math.pow((companded+.055)/1.055,2.4))*sign}const rgb2xyz=(r,g,b)=>{r=gammaAdjustSRGB(r/255),g=gammaAdjustSRGB(g/255),b=gammaAdjustSRGB(b/255);const{MtxRGB2XYZ,MtxAdaptMa,MtxAdaptMaI,Xn,Yn,Zn,As,Bs,Cs}=lab_constants;let x=r*MtxRGB2XYZ.m00+g*MtxRGB2XYZ.m10+b*MtxRGB2XYZ.m20,y=r*MtxRGB2XYZ.m01+g*MtxRGB2XYZ.m11+b*MtxRGB2XYZ.m21,z=r*MtxRGB2XYZ.m02+g*MtxRGB2XYZ.m12+b*MtxRGB2XYZ.m22;const Ad=Xn*MtxAdaptMa.m00+Yn*MtxAdaptMa.m10+Zn*MtxAdaptMa.m20,Bd=Xn*MtxAdaptMa.m01+Yn*MtxAdaptMa.m11+Zn*MtxAdaptMa.m21,Cd=Xn*MtxAdaptMa.m02+Yn*MtxAdaptMa.m12+Zn*MtxAdaptMa.m22;let X=x*MtxAdaptMa.m00+y*MtxAdaptMa.m10+z*MtxAdaptMa.m20,Y=x*MtxAdaptMa.m01+y*MtxAdaptMa.m11+z*MtxAdaptMa.m21,Z=x*MtxAdaptMa.m02+y*MtxAdaptMa.m12+z*MtxAdaptMa.m22;return X*=Ad/As,Y*=Bd/Bs,Z*=Cd/Cs,x=X*MtxAdaptMaI.m00+Y*MtxAdaptMaI.m10+Z*MtxAdaptMaI.m20,y=X*MtxAdaptMaI.m01+Y*MtxAdaptMaI.m11+Z*MtxAdaptMaI.m21,z=X*MtxAdaptMaI.m02+Y*MtxAdaptMaI.m12+Z*MtxAdaptMaI.m22,[x,y,z]},lab_rgb2lab=(...args)=>{const[r,g,b,...rest]=unpack(args,"rgb"),[x,y,z]=rgb2xyz(r,g,b),[L,a,b_]=function xyz2lab(x,y,z){const{Xn,Yn,Zn,kE,kK}=lab_constants,xr=x/Xn,yr=y/Yn,zr=z/Zn,fx=xr>kE?Math.pow(xr,1/3):(kK*xr+16)/116,fy=yr>kE?Math.pow(yr,1/3):(kK*yr+16)/116,fz=zr>kE?Math.pow(zr,1/3):(kK*zr+16)/116;return[116*fy-16,500*(fx-fy),200*(fy-fz)]}(x,y,z);return[L,a,b_,...rest.length>0&&rest[0]<1?[rest[0]]:[]]};src_Color.prototype.lab=function(){return lab_rgb2lab(this._rgb)};Object.assign(src_chroma,{lab:(...args)=>new src_Color(...args,"lab"),getLabWhitePoint,setLabWhitePoint}),input.format.lab=lab_lab2rgb,input.autodetect.push({p:2,test:(...args)=>{if("array"===type(args=unpack(args,"lab"))&&3===args.length)return"lab"}}),src_Color.prototype.darken=function(amount=1){const lab=this.lab();return lab[0]-=lab_constants.Kn*amount,new src_Color(lab,"lab").alpha(this.alpha(),!0)},src_Color.prototype.brighten=function(amount=1){return this.darken(-amount)},src_Color.prototype.darker=src_Color.prototype.darken,src_Color.prototype.brighter=src_Color.prototype.brighten,src_Color.prototype.get=function(mc){const[mode,channel]=mc.split("."),src=this[mode]();if(channel){const i=mode.indexOf(channel)-("ok"===mode.substr(0,2)?2:0);if(i>-1)return src[i];throw new Error(`unknown channel ${channel} in mode ${mode}`)}return src};const{pow}=Math;src_Color.prototype.luminance=function(lum,mode="rgb"){if(void 0!==lum&&"number"===type(lum)){if(0===lum)return new src_Color([0,0,0,this._rgb[3]],"rgb");if(1===lum)return new src_Color([255,255,255,this._rgb[3]],"rgb");let cur_lum=this.luminance(),max_iter=20;const test=(low,high)=>{const mid=low.interpolate(high,.5,mode),lm=mid.luminance();return Math.abs(lum-lm)<1e-7||!max_iter--?mid:lm>lum?test(low,mid):test(mid,high)},rgb=(cur_lum>lum?test(new src_Color([0,0,0]),this):test(this,new src_Color([255,255,255]))).rgb();return new src_Color([...rgb,this._rgb[3]])}return rgb2luminance(...this._rgb.slice(0,3))};const rgb2luminance=(r,g,b)=>.2126*(r=luminance_x(r))+.7152*(g=luminance_x(g))+.0722*(b=luminance_x(b)),luminance_x=x=>(x/=255)<=.03928?x/12.92:pow((x+.055)/1.055,2.4),interpolator={},mix=(col1,col2,f=.5,...rest)=>{let mode=rest[0]||"lrgb";if(interpolator[mode]||rest.length||(mode=Object.keys(interpolator)[0]),!interpolator[mode])throw new Error(`interpolation mode ${mode} is not defined`);return"object"!==type(col1)&&(col1=new src_Color(col1)),"object"!==type(col2)&&(col2=new src_Color(col2)),interpolator[mode](col1,col2,f).alpha(col1.alpha()+f*(col2.alpha()-col1.alpha()))};src_Color.prototype.mix=src_Color.prototype.interpolate=function(col2,f=.5,...rest){return mix(this,col2,f,...rest)},src_Color.prototype.premultiply=function(mutate=!1){const rgb=this._rgb,a=rgb[3];return mutate?(this._rgb=[rgb[0]*a,rgb[1]*a,rgb[2]*a,a],this):new src_Color([rgb[0]*a,rgb[1]*a,rgb[2]*a,a],"rgb")};const{sin,cos}=Math,lch_lch2lab=(...args)=>{let[l,c,h]=unpack(args,"lch");return isNaN(h)&&(h=0),h*=DEG2RAD,[l,cos(h)*c,sin(h)*c]},lch_lch2rgb=(...args)=>{args=unpack(args,"lch");const[l,c,h]=args,[L,a,b_]=lch_lch2lab(l,c,h),[r,g,b]=lab_lab2rgb(L,a,b_);return[r,g,b,args.length>3?args[3]:1]},lch_hcl2rgb=(...args)=>{const hcl=reverse3(unpack(args,"hcl"));return lch_lch2rgb(...hcl)},{sqrt,atan2,round:lab2lch_round}=Math,lch_lab2lch=(...args)=>{const[l,a,b]=unpack(args,"lab"),c=sqrt(a*a+b*b);let h=(atan2(b,a)*RAD2DEG+360)%360;return 0===lab2lch_round(1e4*c)&&(h=Number.NaN),[l,c,h]},lch_rgb2lch=(...args)=>{const[r,g,b,...rest]=unpack(args,"rgb"),[l,a,b_]=lab_rgb2lab(r,g,b),[L,c,h]=lch_lab2lch(l,a,b_);return[L,c,h,...rest.length>0&&rest[0]<1?[rest[0]]:[]]};src_Color.prototype.lch=function(){return lch_rgb2lch(this._rgb)},src_Color.prototype.hcl=function(){return reverse3(lch_rgb2lch(this._rgb))};Object.assign(src_chroma,{lch:(...args)=>new src_Color(...args,"lch"),hcl:(...args)=>new src_Color(...args,"hcl")}),input.format.lch=lch_lch2rgb,input.format.hcl=lch_hcl2rgb,["lch","hcl"].forEach(m=>input.autodetect.push({p:2,test:(...args)=>{if("array"===type(args=unpack(args,m))&&3===args.length)return m}})),src_Color.prototype.saturate=function(amount=1){const lch=this.lch();return lch[1]+=lab_constants.Kn*amount,lch[1]<0&&(lch[1]=0),new src_Color(lch,"lch").alpha(this.alpha(),!0)},src_Color.prototype.desaturate=function(amount=1){return this.saturate(-amount)},src_Color.prototype.set=function(mc,value,mutate=!1){const[mode,channel]=mc.split("."),src=this[mode]();if(channel){const i=mode.indexOf(channel)-("ok"===mode.substr(0,2)?2:0);if(i>-1){if("string"==type(value))switch(value.charAt(0)){case"+":case"-":src[i]+=+value;break;case"*":src[i]*=+value.substr(1);break;case"/":src[i]/=+value.substr(1);break;default:src[i]=+value}else{if("number"!==type(value))throw new Error("unsupported value for Color.set");src[i]=value}const out=new src_Color(src,mode);return mutate?(this._rgb=out._rgb,this):out}throw new Error(`unknown channel ${channel} in mode ${mode}`)}return src},src_Color.prototype.tint=function(f=.5,...rest){return mix(this,"white",f,...rest)},src_Color.prototype.shade=function(f=.5,...rest){return mix(this,"black",f,...rest)};const rgb=(col1,col2,f)=>{const xyz0=col1._rgb,xyz1=col2._rgb;return new src_Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),"rgb")};interpolator.rgb=rgb;const{sqrt:lrgb_sqrt,pow:lrgb_pow}=Math,lrgb=(col1,col2,f)=>{const[x1,y1,z1]=col1._rgb,[x2,y2,z2]=col2._rgb;return new src_Color(lrgb_sqrt(lrgb_pow(x1,2)*(1-f)+lrgb_pow(x2,2)*f),lrgb_sqrt(lrgb_pow(y1,2)*(1-f)+lrgb_pow(y2,2)*f),lrgb_sqrt(lrgb_pow(z1,2)*(1-f)+lrgb_pow(z2,2)*f),"rgb")};interpolator.lrgb=lrgb;const lab_lab=(col1,col2,f)=>{const xyz0=col1.lab(),xyz1=col2.lab();return new src_Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),"lab")};interpolator.lab=lab_lab;const _hsx=(col1,col2,f,m)=>{let xyz0,xyz1,hue0,hue1,sat0,sat1,lbv0,lbv1,sat,hue,lbv,dh;return"hsl"===m?(xyz0=col1.hsl(),xyz1=col2.hsl()):"hsv"===m?(xyz0=col1.hsv(),xyz1=col2.hsv()):"hcg"===m?(xyz0=col1.hcg(),xyz1=col2.hcg()):"hsi"===m?(xyz0=col1.hsi(),xyz1=col2.hsi()):"lch"===m||"hcl"===m?(m="hcl",xyz0=col1.hcl(),xyz1=col2.hcl()):"oklch"===m&&(xyz0=col1.oklch().reverse(),xyz1=col2.oklch().reverse()),"h"!==m.substr(0,1)&&"oklch"!==m||([hue0,sat0,lbv0]=xyz0,[hue1,sat1,lbv1]=xyz1),isNaN(hue0)||isNaN(hue1)?isNaN(hue0)?isNaN(hue1)?hue=Number.NaN:(hue=hue1,1!=lbv0&&0!=lbv0||"hsv"==m||(sat=sat1)):(hue=hue0,1!=lbv1&&0!=lbv1||"hsv"==m||(sat=sat0)):(dh=hue1>hue0&&hue1-hue0>180?hue1-(hue0+360):hue1<hue0&&hue0-hue1>180?hue1+360-hue0:hue1-hue0,hue=hue0+f*dh),void 0===sat&&(sat=sat0+f*(sat1-sat0)),lbv=lbv0+f*(lbv1-lbv0),new src_Color("oklch"===m?[lbv,sat,hue]:[hue,sat,lbv],m)},lch_lch=(col1,col2,f)=>_hsx(col1,col2,f,"lch");interpolator.lch=lch_lch,interpolator.hcl=lch_lch;const num_num2rgb=num=>{if("number"==type(num)&&num>=0&&num<=16777215){return[num>>16,num>>8&255,255&num,1]}throw new Error("unknown num color: "+num)},num_rgb2num=(...args)=>{const[r,g,b]=unpack(args,"rgb");return(r<<16)+(g<<8)+b};src_Color.prototype.num=function(){return num_rgb2num(this._rgb)};Object.assign(src_chroma,{num:(...args)=>new src_Color(...args,"num")}),input.format.num=num_num2rgb,input.autodetect.push({p:5,test:(...args)=>{if(1===args.length&&"number"===type(args[0])&&args[0]>=0&&args[0]<=16777215)return"num"}});const num_num=(col1,col2,f)=>{const c1=col1.num(),c2=col2.num();return new src_Color(c1+f*(c2-c1),"num")};interpolator.num=num_num;const{floor}=Math,hcg_hcg2rgb=(...args)=>{args=unpack(args,"hcg");let r,g,b,[h,c,_g]=args;_g*=255;const _c=255*c;if(0===c)r=g=b=_g;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360),h/=60;const i=floor(h),f=h-i,p=_g*(1-c),q=p+_c*(1-f),t=p+_c*f,v=p+_c;switch(i){case 0:[r,g,b]=[v,t,p];break;case 1:[r,g,b]=[q,v,p];break;case 2:[r,g,b]=[p,v,t];break;case 3:[r,g,b]=[p,q,v];break;case 4:[r,g,b]=[t,p,v];break;case 5:[r,g,b]=[v,p,q]}}return[r,g,b,args.length>3?args[3]:1]},hcg_rgb2hcg=(...args)=>{const[r,g,b]=unpack(args,"rgb"),minRgb=utils_min(r,g,b),maxRgb=utils_max(r,g,b),delta=maxRgb-minRgb,c=100*delta/255,_g=minRgb/(255-delta)*100;let h;return 0===delta?h=Number.NaN:(r===maxRgb&&(h=(g-b)/delta),g===maxRgb&&(h=2+(b-r)/delta),b===maxRgb&&(h=4+(r-g)/delta),h*=60,h<0&&(h+=360)),[h,c,_g]};src_Color.prototype.hcg=function(){return hcg_rgb2hcg(this._rgb)};src_chroma.hcg=(...args)=>new src_Color(...args,"hcg"),input.format.hcg=hcg_hcg2rgb,input.autodetect.push({p:1,test:(...args)=>{if("array"===type(args=unpack(args,"hcg"))&&3===args.length)return"hcg"}});const hcg_hcg=(col1,col2,f)=>_hsx(col1,col2,f,"hcg");interpolator.hcg=hcg_hcg;const{cos:hsi2rgb_cos}=Math,hsi_hsi2rgb=(...args)=>{args=unpack(args,"hsi");let r,g,b,[h,s,i]=args;return isNaN(h)&&(h=0),isNaN(s)&&(s=0),h>360&&(h-=360),h<0&&(h+=360),h/=360,h<1/3?(b=(1-s)/3,r=(1+s*hsi2rgb_cos(TWOPI*h)/hsi2rgb_cos(PITHIRD-TWOPI*h))/3,g=1-(b+r)):h<2/3?(h-=1/3,r=(1-s)/3,g=(1+s*hsi2rgb_cos(TWOPI*h)/hsi2rgb_cos(PITHIRD-TWOPI*h))/3,b=1-(r+g)):(h-=2/3,g=(1-s)/3,b=(1+s*hsi2rgb_cos(TWOPI*h)/hsi2rgb_cos(PITHIRD-TWOPI*h))/3,r=1-(g+b)),r=limit(i*r*3),g=limit(i*g*3),b=limit(i*b*3),[255*r,255*g,255*b,args.length>3?args[3]:1]},{min:rgb2hsi_min,sqrt:rgb2hsi_sqrt,acos}=Math,hsi_rgb2hsi=(...args)=>{let h,[r,g,b]=unpack(args,"rgb");r/=255,g/=255,b/=255;const min_=rgb2hsi_min(r,g,b),i=(r+g+b)/3,s=i>0?1-min_/i:0;return 0===s?h=NaN:(h=(r-g+(r-b))/2,h/=rgb2hsi_sqrt((r-g)*(r-g)+(r-b)*(g-b)),h=acos(h),b>g&&(h=TWOPI-h),h/=TWOPI),[360*h,s,i]};src_Color.prototype.hsi=function(){return hsi_rgb2hsi(this._rgb)};src_chroma.hsi=(...args)=>new src_Color(...args,"hsi"),input.format.hsi=hsi_hsi2rgb,input.autodetect.push({p:2,test:(...args)=>{if("array"===type(args=unpack(args,"hsi"))&&3===args.length)return"hsi"}});const hsi_hsi=(col1,col2,f)=>_hsx(col1,col2,f,"hsi");interpolator.hsi=hsi_hsi;const hsl_hsl2rgb=(...args)=>{args=unpack(args,"hsl");const[h,s,l]=args;let r,g,b;if(0===s)r=g=b=255*l;else{const t3=[0,0,0],c=[0,0,0],t2=l<.5?l*(1+s):l+s-l*s,t1=2*l-t2,h_=h/360;t3[0]=h_+1/3,t3[1]=h_,t3[2]=h_-1/3;for(let i=0;i<3;i++)t3[i]<0&&(t3[i]+=1),t3[i]>1&&(t3[i]-=1),6*t3[i]<1?c[i]=t1+6*(t2-t1)*t3[i]:2*t3[i]<1?c[i]=t2:3*t3[i]<2?c[i]=t1+(t2-t1)*(2/3-t3[i])*6:c[i]=t1;[r,g,b]=[255*c[0],255*c[1],255*c[2]]}return args.length>3?[r,g,b,args[3]]:[r,g,b,1]},hsl_rgb2hsl=(...args)=>{args=unpack(args,"rgba");let[r,g,b]=args;r/=255,g/=255,b/=255;const minRgb=utils_min(r,g,b),maxRgb=utils_max(r,g,b),l=(maxRgb+minRgb)/2;let s,h;return maxRgb===minRgb?(s=0,h=Number.NaN):s=l<.5?(maxRgb-minRgb)/(maxRgb+minRgb):(maxRgb-minRgb)/(2-maxRgb-minRgb),r==maxRgb?h=(g-b)/(maxRgb-minRgb):g==maxRgb?h=2+(b-r)/(maxRgb-minRgb):b==maxRgb&&(h=4+(r-g)/(maxRgb-minRgb)),h*=60,h<0&&(h+=360),args.length>3&&void 0!==args[3]?[h,s,l,args[3]]:[h,s,l]};src_Color.prototype.hsl=function(){return hsl_rgb2hsl(this._rgb)};src_chroma.hsl=(...args)=>new src_Color(...args,"hsl"),input.format.hsl=hsl_hsl2rgb,input.autodetect.push({p:2,test:(...args)=>{if("array"===type(args=unpack(args,"hsl"))&&3===args.length)return"hsl"}});const hsl_hsl=(col1,col2,f)=>_hsx(col1,col2,f,"hsl");interpolator.hsl=hsl_hsl;const{floor:hsv2rgb_floor}=Math,hsv_hsv2rgb=(...args)=>{args=unpack(args,"hsv");let r,g,b,[h,s,v]=args;if(v*=255,0===s)r=g=b=v;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360),h/=60;const i=hsv2rgb_floor(h),f=h-i,p=v*(1-s),q=v*(1-s*f),t=v*(1-s*(1-f));switch(i){case 0:[r,g,b]=[v,t,p];break;case 1:[r,g,b]=[q,v,p];break;case 2:[r,g,b]=[p,v,t];break;case 3:[r,g,b]=[p,q,v];break;case 4:[r,g,b]=[t,p,v];break;case 5:[r,g,b]=[v,p,q]}}return[r,g,b,args.length>3?args[3]:1]},{min:rgb2hsv_min,max:rgb2hsv_max}=Math,rgb2hsv=(...args)=>{args=unpack(args,"rgb");let[r,g,b]=args;const min_=rgb2hsv_min(r,g,b),max_=rgb2hsv_max(r,g,b),delta=max_-min_;let h,s,v;return v=max_/255,0===max_?(h=Number.NaN,s=0):(s=delta/max_,r===max_&&(h=(g-b)/delta),g===max_&&(h=2+(b-r)/delta),b===max_&&(h=4+(r-g)/delta),h*=60,h<0&&(h+=360)),[h,s,v]};src_Color.prototype.hsv=function(){return rgb2hsv(this._rgb)};src_chroma.hsv=(...args)=>new src_Color(...args,"hsv"),input.format.hsv=hsv_hsv2rgb,input.autodetect.push({p:2,test:(...args)=>{if("array"===type(args=unpack(args,"hsv"))&&3===args.length)return"hsv"}});const hsv_hsv=(col1,col2,f)=>_hsx(col1,col2,f,"hsv");interpolator.hsv=hsv_hsv;function multiplyMatrices(A,B){let m=A.length;Array.isArray(A[0])||(A=[A]),Array.isArray(B[0])||(B=B.map(x=>[x]));let p=B[0].length,B_cols=B[0].map((_,i)=>B.map(x=>x[i])),product=A.map(row=>B_cols.map(col=>Array.isArray(row)?row.reduce((a,c,i)=>a+c*(col[i]||0),0):col.reduce((a,c)=>a+c*row,0)));return 1===m&&(product=product[0]),1===p?product.map(x=>x[0]):product}const oklab_oklab2rgb=(...args)=>{args=unpack(args,"lab");const[L,a,b,...rest]=args,[X,Y,Z]=function OKLab_to_XYZ(OKLab){var LMStoXYZ=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],LMSnl=multiplyMatrices([[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],OKLab);return multiplyMatrices(LMStoXYZ,LMSnl.map(c=>c**3))}([L,a,b]),[r,g,b_]=xyz2rgb(X,Y,Z);return[r,g,b_,...rest.length>0&&rest[0]<1?[rest[0]]:[]]};const oklab_rgb2oklab=(...args)=>{const[r,g,b,...rest]=unpack(args,"rgb");return[...function XYZ_to_OKLab(XYZ){const LMStoOKLab=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],LMS=multiplyMatrices([[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],XYZ);return multiplyMatrices(LMStoOKLab,LMS.map(c=>Math.cbrt(c)))}(rgb2xyz(r,g,b)),...rest.length>0&&rest[0]<1?[rest[0]]:[]]};src_Color.prototype.oklab=function(){return oklab_rgb2oklab(this._rgb)};Object.assign(src_chroma,{oklab:(...args)=>new src_Color(...args,"oklab")}),input.format.oklab=oklab_oklab2rgb,input.autodetect.push({p:2,test:(...args)=>{if("array"===type(args=unpack(args,"oklab"))&&3===args.length)return"oklab"}});const oklab_oklab=(col1,col2,f)=>{const xyz0=col1.oklab(),xyz1=col2.oklab();return new src_Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),"oklab")};interpolator.oklab=oklab_oklab;const oklch=(col1,col2,f)=>_hsx(col1,col2,f,"oklch");interpolator.oklch=oklch;const{pow:average_pow,sqrt:average_sqrt,PI:average_PI,cos:average_cos,sin:average_sin,atan2:average_atan2}=Math,_average_lrgb=(colors,weights)=>{const l=colors.length,xyz=[0,0,0,0];for(let i=0;i<colors.length;i++){const col=colors[i],f=weights[i]/l,rgb=col._rgb;xyz[0]+=average_pow(rgb[0],2)*f,xyz[1]+=average_pow(rgb[1],2)*f,xyz[2]+=average_pow(rgb[2],2)*f,xyz[3]+=rgb[3]*f}return xyz[0]=average_sqrt(xyz[0]),xyz[1]=average_sqrt(xyz[1]),xyz[2]=average_sqrt(xyz[2]),xyz[3]>.9999999&&(xyz[3]=1),new src_Color(clip_rgb(xyz))},{pow:scale_pow}=Math;function scale(colors){let _mode="rgb",_nacol=src_chroma("#ccc"),_spread=0,_positions=[0,1],_domain=[0,1],_pos=[],_padding=[0,0],_classes=!1,_colors=[],_out=!1,_min=0,_max=1,_correctLightness=!1,_colorCache={},_useCache=!0,_gamma=1;const setColors=function(colors){if((colors=colors||["#fff","#000"])&&"string"===type(colors)&&src_chroma.brewer&&src_chroma.brewer[colors.toLowerCase()]&&(colors=src_chroma.brewer[colors.toLowerCase()]),"array"===type(colors)){1===colors.length&&(colors=[colors[0],colors[0]]),colors=colors.slice(0);for(let c=0;c<colors.length;c++)colors[c]=src_chroma(colors[c]);_pos.length=0;for(let c=0;c<colors.length;c++)_pos.push(c/(colors.length-1))}return resetCache(),_colors=colors};let tMapLightness=t=>t,tMapDomain=t=>t;const getColor=function(val,bypassMap){let col,t;if(null==bypassMap&&(bypassMap=!1),isNaN(val)||null===val)return _nacol;if(bypassMap)t=val;else if(_classes&&_classes.length>2){t=function(value){if(null!=_classes){const n=_classes.length-1;let i=0;for(;i<n&&value>=_classes[i];)i++;return i-1}return 0}(val)/(_classes.length-2)}else t=_max!==_min?(val-_min)/(_max-_min):1;t=tMapDomain(t),bypassMap||(t=tMapLightness(t)),1!==_gamma&&(t=scale_pow(t,_gamma)),t=_padding[0]+t*(1-_padding[0]-_padding[1]),t=limit(t,0,1);const k=Math.floor(1e4*t);if(_useCache&&_colorCache[k])col=_colorCache[k];else{if("array"===type(_colors))for(let i=0;i<_pos.length;i++){const p=_pos[i];if(t<=p){col=_colors[i];break}if(t>=p&&i===_pos.length-1){col=_colors[i];break}if(t>p&&t<_pos[i+1]){t=(t-p)/(_pos[i+1]-p),col=src_chroma.interpolate(_colors[i],_colors[i+1],t,_mode);break}}else"function"===type(_colors)&&(col=_colors(t));_useCache&&(_colorCache[k]=col)}return col};var resetCache=()=>_colorCache={};setColors(colors);const f=function(v){const c=src_chroma(getColor(v));return _out&&c[_out]?c[_out]():c};return f.classes=function(classes){if(null!=classes){if("array"===type(classes))_classes=classes,_positions=[classes[0],classes[classes.length-1]];else{const d=src_chroma.analyze(_positions);_classes=0===classes?[d.min,d.max]:src_chroma.limits(d,"e",classes)}return f}return _classes},f.domain=function(domain){if(!arguments.length)return _domain;_domain=domain.slice(0),_min=domain[0],_max=domain[domain.length-1],_pos=[];const k=_colors.length;if(domain.length===k&&_min!==_max)for(let d of Array.from(domain))_pos.push((d-_min)/(_max-_min));else{for(let c=0;c<k;c++)_pos.push(c/(k-1));if(domain.length>2){const tOut=domain.map((d,i)=>i/(domain.length-1)),tBreaks=domain.map(d=>(d-_min)/(_max-_min));tBreaks.every((val,i)=>tOut[i]===val)||(tMapDomain=t=>{if(t<=0||t>=1)return t;let i=0;for(;t>=tBreaks[i+1];)i++;const f=(t-tBreaks[i])/(tBreaks[i+1]-tBreaks[i]);return tOut[i]+f*(tOut[i+1]-tOut[i])})}}return _positions=[_min,_max],f},f.mode=function(_m){return arguments.length?(_mode=_m,resetCache(),f):_mode},f.range=function(colors,_pos){return setColors(colors),f},f.out=function(_o){return _out=_o,f},f.spread=function(val){return arguments.length?(_spread=val,f):_spread},f.correctLightness=function(v){return null==v&&(v=!0),_correctLightness=v,resetCache(),tMapLightness=_correctLightness?function(t){const L0=getColor(0,!0).lab()[0],L1=getColor(1,!0).lab()[0],pol=L0>L1;let L_actual=getColor(t,!0).lab()[0];const L_ideal=L0+(L1-L0)*t;let L_diff=L_actual-L_ideal,t0=0,t1=1,max_iter=20;for(;Math.abs(L_diff)>.01&&max_iter-- >0;)(function(){pol&&(L_diff*=-1),L_diff<0?(t0=t,t+=.5*(t1-t)):(t1=t,t+=.5*(t0-t)),L_actual=getColor(t,!0).lab()[0],L_diff=L_actual-L_ideal})();return t}:t=>t,f},f.padding=function(p){return null!=p?("number"===type(p)&&(p=[p,p]),_padding=p,f):_padding},f.colors=function(numColors,out){arguments.length<2&&(out="hex");let result=[];if(0===arguments.length)result=_colors.slice(0);else if(1===numColors)result=[f(.5)];else if(numColors>1){const dm=_positions[0],dd=_positions[1]-dm;result=function __range__(left,right,inclusive){let range=[],ascending=left<right,end=inclusive?ascending?right+1:right-1:right;for(let i=left;ascending?i<end:i>end;ascending?i++:i--)range.push(i);return range}(0,numColors,!1).map(i=>f(dm+i/(numColors-1)*dd))}else{colors=[];let samples=[];if(_classes&&_classes.length>2)for(let i=1,end=_classes.length,asc=1<=end;asc?i<end:i>end;asc?i++:i--)samples.push(.5*(_classes[i-1]+_classes[i]));else samples=_positions;result=samples.map(v=>f(v))}return src_chroma[out]&&(result=result.map(c=>c[out]())),result},f.cache=function(c){return null!=c?(_useCache=c,f):_useCache},f.gamma=function(g){return null!=g?(_gamma=g,f):_gamma},f.nodata=function(d){return null!=d?(_nacol=src_chroma(d),f):_nacol},f}const{round:rgb_round}=Math;src_Color.prototype.rgb=function(rnd=!0){return!1===rnd?this._rgb.slice(0,3):this._rgb.slice(0,3).map(rgb_round)},src_Color.prototype.rgba=function(rnd=!0){return this._rgb.slice(0,4).map((v,i)=>i<3?!1===rnd?v:rgb_round(v):v)};Object.assign(src_chroma,{rgb:(...args)=>new src_Color(...args,"rgb")}),input.format.rgb=(...args)=>{const rgba=unpack(args,"rgba");return void 0===rgba[3]&&(rgba[3]=1),rgba},input.autodetect.push({p:3,test:(...args)=>{if("array"===type(args=unpack(args,"rgba"))&&(3===args.length||4===args.length&&"number"==type(args[3])&&args[3]>=0&&args[3]<=1))return"rgb"}});const blend=(bottom,top,mode)=>{if(!blend[mode])throw new Error("unknown blend mode "+mode);return blend[mode](bottom,top)},blend_f=f=>(bottom,top)=>{const c0=src_chroma(top).rgb(),c1=src_chroma(bottom).rgb();return src_chroma.rgb(f(c0,c1))},each=f=>(c0,c1)=>{const out=[];return out[0]=f(c0[0],c1[0]),out[1]=f(c0[1],c1[1]),out[2]=f(c0[2],c1[2]),out};blend.normal=blend_f(each(a=>a)),blend.multiply=blend_f(each((a,b)=>a*b/255)),blend.screen=blend_f(each((a,b)=>255*(1-(1-a/255)*(1-b/255)))),blend.overlay=blend_f(each((a,b)=>b<128?2*a*b/255:255*(1-2*(1-a/255)*(1-b/255)))),blend.darken=blend_f(each((a,b)=>a>b?b:a)),blend.lighten=blend_f(each((a,b)=>a>b?a:b)),blend.dodge=blend_f(each((a,b)=>255===a||(a=b/255*255/(1-a/255))>255?255:a)),blend.burn=blend_f(each((a,b)=>255*(1-(1-b/255)/(a/255))));const generator_blend=blend,{pow:cubehelix_pow,sin:cubehelix_sin,cos:cubehelix_cos}=Math;const{floor:random_floor,random}=Math,{log,pow:analyze_pow,floor:analyze_floor,abs}=Math;function analyze(data,key=null){const r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===type(data)&&(data=Object.values(data)),data.forEach(val=>{key&&"object"===type(val)&&(val=val[key]),null==val||isNaN(val)||(r.values.push(val),r.sum+=val,val<r.min&&(r.min=val),val>r.max&&(r.max=val),r.count+=1)}),r.domain=[r.min,r.max],r.limits=(mode,num)=>limits(r,mode,num),r}function limits(data,mode="equal",num=7){"array"==type(data)&&(data=analyze(data));const{min,max}=data,values=data.values.sort((a,b)=>a-b);if(1===num)return[min,max];const limits=[];if("c"===mode.substr(0,1)&&(limits.push(min),limits.push(max)),"e"===mode.substr(0,1)){limits.push(min);for(let i=1;i<num;i++)limits.push(min+i/num*(max-min));limits.push(max)}else if("l"===mode.substr(0,1)){if(min<=0)throw new Error("Logarithmic scales are only possible for values > 0");const min_log=Math.LOG10E*log(min),max_log=Math.LOG10E*log(max);limits.push(min);for(let i=1;i<num;i++)limits.push(analyze_pow(10,min_log+i/num*(max_log-min_log)));limits.push(max)}else if("q"===mode.substr(0,1)){limits.push(min);for(let i=1;i<num;i++){const p=(values.length-1)*i/num,pb=analyze_floor(p);if(pb===p)limits.push(values[pb]);else{const pr=p-pb;limits.push(values[pb]*(1-pr)+values[pb+1]*pr)}}limits.push(max)}else if("k"===mode.substr(0,1)){let cluster;const n=values.length,assignments=new Array(n),clusterSizes=new Array(num);let repeat=!0,nb_iters=0,centroids=null;centroids=[],centroids.push(min);for(let i=1;i<num;i++)centroids.push(min+i/num*(max-min));for(centroids.push(max);repeat;){for(let j=0;j<num;j++)clusterSizes[j]=0;for(let i=0;i<n;i++){const value=values[i];let best,mindist=Number.MAX_VALUE;for(let j=0;j<num;j++){const dist=abs(centroids[j]-value);dist<mindist&&(mindist=dist,best=j),clusterSizes[best]++,assignments[i]=best}}const newCentroids=new Array(num);for(let j=0;j<num;j++)newCentroids[j]=null;for(let i=0;i<n;i++)cluster=assignments[i],null===newCentroids[cluster]?newCentroids[cluster]=values[i]:newCentroids[cluster]+=values[i];for(let j=0;j<num;j++)newCentroids[j]*=1/clusterSizes[j];repeat=!1;for(let j=0;j<num;j++)if(newCentroids[j]!==centroids[j]){repeat=!0;break}centroids=newCentroids,nb_iters++,nb_iters>200&&(repeat=!1)}const kClusters={};for(let j=0;j<num;j++)kClusters[j]=[];for(let i=0;i<n;i++)cluster=assignments[i],kClusters[cluster].push(values[i]);let tmpKMeansBreaks=[];for(let j=0;j<num;j++)tmpKMeansBreaks.push(kClusters[j][0]),tmpKMeansBreaks.push(kClusters[j][kClusters[j].length-1]);tmpKMeansBreaks=tmpKMeansBreaks.sort((a,b)=>a-b),limits.push(tmpKMeansBreaks[0]);for(let i=1;i<tmpKMeansBreaks.length;i+=2){const v=tmpKMeansBreaks[i];isNaN(v)||-1!==limits.indexOf(v)||limits.push(v)}}return limits}function lum(r,g,b){return.2126729*Math.pow(r/255,2.4)+.7151522*Math.pow(g/255,2.4)+.072175*Math.pow(b/255,2.4)}const{sqrt:delta_e_sqrt,pow:delta_e_pow,min:delta_e_min,max:delta_e_max,atan2:delta_e_atan2,abs:delta_e_abs,cos:delta_e_cos,sin:delta_e_sin,exp,PI:delta_e_PI}=Math;const scales={cool:()=>scale([src_chroma.hsl(180,1,.9),src_chroma.hsl(250,.7,.4)]),hot:()=>scale(["#000","#f00","#ff0","#fff"]).mode("rgb")},colorbrewer={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},colorbrewerTypes=Object.keys(colorbrewer),typeMap=new Map(colorbrewerTypes.map(key=>[key.toLowerCase(),key])),colors_colorbrewer="function"==typeof Proxy?new Proxy(colorbrewer,{get(target,prop){const lower=prop.toLowerCase();if(typeMap.has(lower))return target[typeMap.get(lower)]},getOwnPropertyNames:()=>Object.getOwnPropertyNames(colorbrewerTypes)}):colorbrewer,cmyk_cmyk2rgb=(...args)=>{args=unpack(args,"cmyk");const[c,m,y,k]=args,alpha=args.length>4?args[4]:1;return 1===k?[0,0,0,alpha]:[c>=1?0:255*(1-c)*(1-k),m>=1?0:255*(1-m)*(1-k),y>=1?0:255*(1-y)*(1-k),alpha]},{max:rgb2cmyk_max}=Math,cmyk_rgb2cmyk=(...args)=>{let[r,g,b]=unpack(args,"rgb");r/=255,g/=255,b/=255;const k=1-rgb2cmyk_max(r,rgb2cmyk_max(g,b)),f=k<1?1/(1-k):0;return[(1-r-k)*f,(1-g-k)*f,(1-b-k)*f,k]};src_Color.prototype.cmyk=function(){return cmyk_rgb2cmyk(this._rgb)};Object.assign(src_chroma,{cmyk:(...args)=>new src_Color(...args,"cmyk")}),input.format.cmyk=cmyk_cmyk2rgb,input.autodetect.push({p:2,test:(...args)=>{if("array"===type(args=unpack(args,"cmyk"))&&4===args.length)return"cmyk"}});const css_hsl2css=(...args)=>{const hsla=unpack(args,"hsla");let mode=last(args)||"lsa";return hsla[0]=rnd2(hsla[0]||0)+"deg",hsla[1]=rnd2(100*hsla[1])+"%",hsla[2]=rnd2(100*hsla[2])+"%","hsla"===mode||hsla.length>3&&hsla[3]<1?(hsla[3]="/ "+(hsla.length>3?hsla[3]:1),mode="hsla"):hsla.length=3,`${mode.substr(0,3)}(${hsla.join(" ")})`},css_lab2css=(...args)=>{const laba=unpack(args,"lab");let mode=last(args)||"lab";return laba[0]=rnd2(laba[0])+"%",laba[1]=rnd2(laba[1]),laba[2]=rnd2(laba[2]),"laba"===mode||laba.length>3&&laba[3]<1?laba[3]="/ "+(laba.length>3?laba[3]:1):laba.length=3,`lab(${laba.join(" ")})`},css_lch2css=(...args)=>{const lcha=unpack(args,"lch");let mode=last(args)||"lab";return lcha[0]=rnd2(lcha[0])+"%",lcha[1]=rnd2(lcha[1]),lcha[2]=isNaN(lcha[2])?"none":rnd2(lcha[2])+"deg","lcha"===mode||lcha.length>3&&lcha[3]<1?lcha[3]="/ "+(lcha.length>3?lcha[3]:1):lcha.length=3,`lch(${lcha.join(" ")})`},css_oklab2css=(...args)=>{const laba=unpack(args,"lab");return laba[0]=rnd2(100*laba[0])+"%",laba[1]=rnd3(laba[1]),laba[2]=rnd3(laba[2]),laba.length>3&&laba[3]<1?laba[3]="/ "+(laba.length>3?laba[3]:1):laba.length=3,`oklab(${laba.join(" ")})`},oklch_rgb2oklch=(...args)=>{const[r,g,b,...rest]=unpack(args,"rgb"),[l,a,b_]=oklab_rgb2oklab(r,g,b),[L,c,h]=lch_lab2lch(l,a,b_);return[L,c,h,...rest.length>0&&rest[0]<1?[rest[0]]:[]]},css_oklch2css=(...args)=>{const lcha=unpack(args,"lch");return lcha[0]=rnd2(100*lcha[0])+"%",lcha[1]=rnd3(lcha[1]),lcha[2]=isNaN(lcha[2])?"none":rnd2(lcha[2])+"deg",lcha.length>3&&lcha[3]<1?lcha[3]="/ "+(lcha.length>3?lcha[3]:1):lcha.length=3,`oklch(${lcha.join(" ")})`},{round:rgb2css_round}=Math,css_rgb2css=(...args)=>{const rgba=unpack(args,"rgba");let mode=last(args)||"rgb";if("hsl"===mode.substr(0,3))return css_hsl2css(hsl_rgb2hsl(rgba),mode);if("lab"===mode.substr(0,3)){const prevWhitePoint=getLabWhitePoint();setLabWhitePoint("d50");const cssColor=css_lab2css(lab_rgb2lab(rgba),mode);return setLabWhitePoint(prevWhitePoint),cssColor}if("lch"===mode.substr(0,3)){const prevWhitePoint=getLabWhitePoint();setLabWhitePoint("d50");const cssColor=css_lch2css(lch_rgb2lch(rgba),mode);return setLabWhitePoint(prevWhitePoint),cssColor}return"oklab"===mode.substr(0,5)?css_oklab2css(oklab_rgb2oklab(rgba)):"oklch"===mode.substr(0,5)?css_oklch2css(oklch_rgb2oklch(rgba)):(rgba[0]=rgb2css_round(rgba[0]),rgba[1]=rgb2css_round(rgba[1]),rgba[2]=rgb2css_round(rgba[2]),("rgba"===mode||rgba.length>3&&rgba[3]<1)&&(rgba[3]="/ "+(rgba.length>3?rgba[3]:1),mode="rgba"),`${mode.substr(0,3)}(${rgba.slice(0,"rgb"===mode?3:4).join(" ")})`)},oklch_oklch2rgb=(...args)=>{args=unpack(args,"lch");const[l,c,h,...rest]=args,[L,a,b_]=lch_lch2lab(l,c,h),[r,g,b]=oklab_oklab2rgb(L,a,b_);return[r,g,b,...rest.length>0&&rest[0]<1?[rest[0]]:[]]},INT_OR_PCT=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,FLOAT_OR_PCT=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,PCT=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,RE_S=/\s*/.source,SEP=/\s+/.source,COMMA=/\s*,\s*/.source,ANLGE=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,ALPHA=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,RE_RGB=new RegExp("^rgba?\\("+RE_S+[INT_OR_PCT,INT_OR_PCT,INT_OR_PCT].join(SEP)+ALPHA+"\\)$"),RE_RGB_LEGACY=new RegExp("^rgb\\("+RE_S+[INT_OR_PCT,INT_OR_PCT,INT_OR_PCT].join(COMMA)+RE_S+"\\)$"),RE_RGBA_LEGACY=new RegExp("^rgba\\("+RE_S+[INT_OR_PCT,INT_OR_PCT,INT_OR_PCT,FLOAT_OR_PCT].join(COMMA)+RE_S+"\\)$"),RE_HSL=new RegExp("^hsla?\\("+RE_S+[ANLGE,PCT,PCT].join(SEP)+ALPHA+"\\)$"),RE_HSL_LEGACY=new RegExp("^hsl?\\("+RE_S+[ANLGE,PCT,PCT].join(COMMA)+RE_S+"\\)$"),RE_HSLA_LEGACY=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,RE_LAB=new RegExp("^lab\\("+RE_S+[FLOAT_OR_PCT,FLOAT_OR_PCT,FLOAT_OR_PCT].join(SEP)+ALPHA+"\\)$"),RE_LCH=new RegExp("^lch\\("+RE_S+[FLOAT_OR_PCT,FLOAT_OR_PCT,ANLGE].join(SEP)+ALPHA+"\\)$"),RE_OKLAB=new RegExp("^oklab\\("+RE_S+[FLOAT_OR_PCT,FLOAT_OR_PCT,FLOAT_OR_PCT].join(SEP)+ALPHA+"\\)$"),RE_OKLCH=new RegExp("^oklch\\("+RE_S+[FLOAT_OR_PCT,FLOAT_OR_PCT,ANLGE].join(SEP)+ALPHA+"\\)$"),{round:css2rgb_round}=Math,roundRGB=rgb=>rgb.map((v,i)=>i<=2?limit(css2rgb_round(v),0,255):v),percentToAbsolute=(pct,min=0,max=100,signed=!1)=>("string"==typeof pct&&pct.endsWith("%")&&(pct=parseFloat(pct.substring(0,pct.length-1))/100,pct=signed?min+.5*(pct+1)*(max-min):min+pct*(max-min)),+pct),noneToValue=(v,noneValue)=>"none"===v?noneValue:v,css2rgb=css=>{if("transparent"===(css=css.toLowerCase().trim()))return[0,0,0,0];let m;if(input.format.named)try{return input.format.named(css)}catch(e){}if((m=css.match(RE_RGB))||(m=css.match(RE_RGB_LEGACY))){let rgb=m.slice(1,4);for(let i=0;i<3;i++)rgb[i]=+percentToAbsolute(noneToValue(rgb[i],0),0,255);rgb=roundRGB(rgb);const alpha=void 0!==m[4]?+percentToAbsolute(m[4],0,1):1;return rgb[3]=alpha,rgb}if(m=css.match(RE_RGBA_LEGACY)){const rgb=m.slice(1,5);for(let i=0;i<4;i++)rgb[i]=+percentToAbsolute(rgb[i],0,255);return rgb}if((m=css.match(RE_HSL))||(m=css.match(RE_HSL_LEGACY))){const hsl=m.slice(1,4);hsl[0]=+noneToValue(hsl[0].replace("deg",""),0),hsl[1]=.01*+percentToAbsolute(noneToValue(hsl[1],0),0,100),hsl[2]=.01*+percentToAbsolute(noneToValue(hsl[2],0),0,100);const rgb=roundRGB(hsl_hsl2rgb(hsl)),alpha=void 0!==m[4]?+percentToAbsolute(m[4],0,1):1;return rgb[3]=alpha,rgb}if(m=css.match(RE_HSLA_LEGACY)){const hsl=m.slice(1,4);hsl[1]*=.01,hsl[2]*=.01;const rgb=hsl_hsl2rgb(hsl);for(let i=0;i<3;i++)rgb[i]=css2rgb_round(rgb[i]);return rgb[3]=+m[4],rgb}if(m=css.match(RE_LAB)){const lab=m.slice(1,4);lab[0]=percentToAbsolute(noneToValue(lab[0],0),0,100),lab[1]=percentToAbsolute(noneToValue(lab[1],0),-125,125,!0),lab[2]=percentToAbsolute(noneToValue(lab[2],0),-125,125,!0);const wp=getLabWhitePoint();setLabWhitePoint("d50");const rgb=roundRGB(lab_lab2rgb(lab));setLabWhitePoint(wp);const alpha=void 0!==m[4]?+percentToAbsolute(m[4],0,1):1;return rgb[3]=alpha,rgb}if(m=css.match(RE_LCH)){const lch=m.slice(1,4);lch[0]=percentToAbsolute(lch[0],0,100),lch[1]=percentToAbsolute(noneToValue(lch[1],0),0,150,!1),lch[2]=+noneToValue(lch[2].replace("deg",""),0);const wp=getLabWhitePoint();setLabWhitePoint("d50");const rgb=roundRGB(lch_lch2rgb(lch));setLabWhitePoint(wp);const alpha=void 0!==m[4]?+percentToAbsolute(m[4],0,1):1;return rgb[3]=alpha,rgb}if(m=css.match(RE_OKLAB)){const oklab=m.slice(1,4);oklab[0]=percentToAbsolute(noneToValue(oklab[0],0),0,1),oklab[1]=percentToAbsolute(noneToValue(oklab[1],0),-.4,.4,!0),oklab[2]=percentToAbsolute(noneToValue(oklab[2],0),-.4,.4,!0);const rgb=roundRGB(oklab_oklab2rgb(oklab)),alpha=void 0!==m[4]?+percentToAbsolute(m[4],0,1):1;return rgb[3]=alpha,rgb}if(m=css.match(RE_OKLCH)){const oklch=m.slice(1,4);oklch[0]=percentToAbsolute(noneToValue(oklch[0],0),0,1),oklch[1]=percentToAbsolute(noneToValue(oklch[1],0),0,.4,!1),oklch[2]=+noneToValue(oklch[2].replace("deg",""),0);const rgb=roundRGB(oklch_oklch2rgb(oklch)),alpha=void 0!==m[4]?+percentToAbsolute(m[4],0,1):1;return rgb[3]=alpha,rgb}};css2rgb.test=s=>RE_RGB.test(s)||RE_HSL.test(s)||RE_LAB.test(s)||RE_LCH.test(s)||RE_OKLAB.test(s)||RE_OKLCH.test(s)||RE_RGB_LEGACY.test(s)||RE_RGBA_LEGACY.test(s)||RE_HSL_LEGACY.test(s)||RE_HSLA_LEGACY.test(s)||"transparent"===s;const css_css2rgb=css2rgb;src_Color.prototype.css=function(mode){return css_rgb2css(this._rgb,mode)};src_chroma.css=(...args)=>new src_Color(...args,"css"),input.format.css=css_css2rgb,input.autodetect.push({p:5,test:(h,...rest)=>{if(!rest.length&&"string"===type(h)&&css_css2rgb.test(h))return"css"}}),input.format.gl=(...args)=>{const rgb=unpack(args,"rgba");return rgb[0]*=255,rgb[1]*=255,rgb[2]*=255,rgb};src_chroma.gl=(...args)=>new src_Color(...args,"gl"),src_Color.prototype.gl=function(){const rgb=this._rgb;return[rgb[0]/255,rgb[1]/255,rgb[2]/255,rgb[3]]},src_Color.prototype.hex=function(mode){return hex_rgb2hex(this._rgb,mode)};src_chroma.hex=(...args)=>new src_Color(...args,"hex"),input.format.hex=hex_hex2rgb,input.autodetect.push({p:4,test:(h,...rest)=>{if(!rest.length&&"string"===type(h)&&[3,4,5,6,7,8,9].indexOf(h.length)>=0)return"hex"}});const{log:temperature2rgb_log}=Math,temp_temperature2rgb=kelvin=>{const temp=kelvin/100;let r,g,b;return temp<66?(r=255,g=temp<6?0:-155.25485562709179-.44596950469579133*(g=temp-2)+104.49216199393888*temperature2rgb_log(g),b=temp<20?0:.8274096064007395*(b=temp-10)-254.76935184120902+115.67994401066147*temperature2rgb_log(b)):(r=351.97690566805693+.114206453784165*(r=temp-55)-40.25366309332127*temperature2rgb_log(r),g=325.4494125711974+.07943456536662342*(g=temp-50)-28.0852963507957*temperature2rgb_log(g),b=255),[r,g,b,1]},{round:rgb2temperature_round}=Math,temp_rgb2temperature=(...args)=>{const rgb=unpack(args,"rgb"),r=rgb[0],b=rgb[2];let minTemp=1e3,maxTemp=4e4;let temp;for(;maxTemp-minTemp>.4;){temp=.5*(maxTemp+minTemp);const rgb=temp_temperature2rgb(temp);rgb[2]/rgb[0]>=b/r?maxTemp=temp:minTemp=temp}return rgb2temperature_round(temp)};src_Color.prototype.temp=src_Color.prototype.kelvin=src_Color.prototype.temperature=function(){return temp_rgb2temperature(this._rgb)};const temp=(...args)=>new src_Color(...args,"temp");Object.assign(src_chroma,{temp,kelvin:temp,temperature:temp}),input.format.temp=input.format.kelvin=input.format.temperature=temp_temperature2rgb,src_Color.prototype.oklch=function(){return oklch_rgb2oklch(this._rgb)};Object.assign(src_chroma,{oklch:(...args)=>new src_Color(...args,"oklch")}),input.format.oklch=oklch_oklch2rgb,input.autodetect.push({p:2,test:(...args)=>{if("array"===type(args=unpack(args,"oklch"))&&3===args.length)return"oklch"}}),Object.assign(src_chroma,{analyze,average:(colors,mode="lrgb",weights=null)=>{const l=colors.length;weights||(weights=Array.from(new Array(l)).map(()=>1));const k=l/weights.reduce(function(a,b){return a+b});if(weights.forEach((w,i)=>{weights[i]*=k}),colors=colors.map(c=>new src_Color(c)),"lrgb"===mode)return _average_lrgb(colors,weights);const first=colors.shift(),xyz=first.get(mode),cnt=[];let dx=0,dy=0;for(let i=0;i<xyz.length;i++)if(xyz[i]=(xyz[i]||0)*weights[0],cnt.push(isNaN(xyz[i])?0:weights[0]),"h"===mode.charAt(i)&&!isNaN(xyz[i])){const A=xyz[i]/180*average_PI;dx+=average_cos(A)*weights[0],dy+=average_sin(A)*weights[0]}let alpha=first.alpha()*weights[0];colors.forEach((c,ci)=>{const xyz2=c.get(mode);alpha+=c.alpha()*weights[ci+1];for(let i=0;i<xyz.length;i++)if(!isNaN(xyz2[i]))if(cnt[i]+=weights[ci+1],"h"===mode.charAt(i)){const A=xyz2[i]/180*average_PI;dx+=average_cos(A)*weights[ci+1],dy+=average_sin(A)*weights[ci+1]}else xyz[i]+=xyz2[i]*weights[ci+1]});for(let i=0;i<xyz.length;i++)if("h"===mode.charAt(i)){let A=average_atan2(dy/cnt[i],dx/cnt[i])/average_PI*180;for(;A<0;)A+=360;for(;A>=360;)A-=360;xyz[i]=A}else xyz[i]=xyz[i]/cnt[i];return alpha/=l,new src_Color(xyz,mode).alpha(alpha>.99999?1:alpha,!0)},bezier:colors=>{const f=function(colors){let I,lab0,lab1,lab2;if(2===(colors=colors.map(c=>new src_Color(c))).length)[lab0,lab1]=colors.map(c=>c.lab()),I=function(t){const lab=[0,1,2].map(i=>lab0[i]+t*(lab1[i]-lab0[i]));return new src_Color(lab,"lab")};else if(3===colors.length)[lab0,lab1,lab2]=colors.map(c=>c.lab()),I=function(t){const lab=[0,1,2].map(i=>(1-t)*(1-t)*lab0[i]+2*(1-t)*t*lab1[i]+t*t*lab2[i]);return new src_Color(lab,"lab")};else if(4===colors.length){let lab3;[lab0,lab1,lab2,lab3]=colors.map(c=>c.lab()),I=function(t){const lab=[0,1,2].map(i=>(1-t)*(1-t)*(1-t)*lab0[i]+3*(1-t)*(1-t)*t*lab1[i]+3*(1-t)*t*t*lab2[i]+t*t*t*lab3[i]);return new src_Color(lab,"lab")}}else{if(!(colors.length>=5))throw new RangeError("No point in running bezier with only one color.");{let labs,row,n;labs=colors.map(c=>c.lab()),n=colors.length-1,row=function(n){let row=[1,1];for(let i=1;i<n;i++){let newrow=[1];for(let j=1;j<=row.length;j++)newrow[j]=(row[j]||0)+row[j-1];row=newrow}return row}(n),I=function(t){const u=1-t,lab=[0,1,2].map(i=>labs.reduce((sum,el,j)=>sum+row[j]*u**(n-j)*t**j*el[i],0));return new src_Color(lab,"lab")}}}return I}(colors);return f.scale=()=>scale(f),f},blend:generator_blend,brewer:colors_colorbrewer,Color:src_Color,colors:colors_w3cx11,contrast:(a,b)=>{a=new src_Color(a),b=new src_Color(b);const l1=a.luminance(),l2=b.luminance();return l1>l2?(l1+.05)/(l2+.05):(l2+.05)/(l1+.05)},contrastAPCA:(text,bg)=>{text=new src_Color(text),bg=new src_Color(bg),text.alpha()<1&&(text=mix(bg,text,text.alpha(),"rgb"));const l_text=lum(...text.rgb()),l_bg=lum(...bg.rgb()),Y_text=l_text>=.022?l_text:l_text+Math.pow(.022-l_text,1.414),Y_bg=l_bg>=.022?l_bg:l_bg+Math.pow(.022-l_bg,1.414),S_norm=Math.pow(Y_bg,.56)-Math.pow(Y_text,.57),S_rev=Math.pow(Y_bg,.65)-Math.pow(Y_text,.62),C=Math.abs(Y_bg-Y_text)<5e-4?0:Y_text<Y_bg?1.14*S_norm:1.14*S_rev;return 100*(Math.abs(C)<.1?0:C>0?C-.027:C+.027)},cubehelix:function cubehelix(start=300,rotations=-1.5,hue=1,gamma=1,lightness=[0,1]){let dl,dh=0;"array"===type(lightness)?dl=lightness[1]-lightness[0]:(dl=0,lightness=[lightness,lightness]);const f=function(fract){const a=TWOPI*((start+120)/360+rotations*fract),l=cubehelix_pow(lightness[0]+dl*fract,gamma),amp=(0!==dh?hue[0]+fract*dh:hue)*l*(1-l)/2,cos_a=cubehelix_cos(a),sin_a=cubehelix_sin(a);return src_chroma(clip_rgb([255*(l+amp*(-.14861*cos_a+1.78277*sin_a)),255*(l+amp*(-.29227*cos_a-.90649*sin_a)),255*(l+amp*(1.97294*cos_a)),1]))};return f.start=function(s){return null==s?start:(start=s,f)},f.rotations=function(r){return null==r?rotations:(rotations=r,f)},f.gamma=function(g){return null==g?gamma:(gamma=g,f)},f.hue=function(h){return null==h?hue:("array"===type(hue=h)?(dh=hue[1]-hue[0],0===dh&&(hue=hue[1])):dh=0,f)},f.lightness=function(h){return null==h?lightness:("array"===type(h)?(lightness=h,dl=h[1]-h[0]):(lightness=[h,h],dl=0),f)},f.scale=()=>src_chroma.scale(f),f.hue(hue),f},deltaE:function delta_e(a,b,Kl=1,Kc=1,Kh=1){var rad2deg=function(rad){return 360*rad/(2*delta_e_PI)},deg2rad=function(deg){return 2*delta_e_PI*deg/360};a=new src_Color(a),b=new src_Color(b);const[L1,a1,b1]=Array.from(a.lab()),[L2,a2,b2]=Array.from(b.lab()),avgL=(L1+L2)/2,avgC=(delta_e_sqrt(delta_e_pow(a1,2)+delta_e_pow(b1,2))+delta_e_sqrt(delta_e_pow(a2,2)+delta_e_pow(b2,2)))/2,G=.5*(1-delta_e_sqrt(delta_e_pow(avgC,7)/(delta_e_pow(avgC,7)+delta_e_pow(25,7)))),a1p=a1*(1+G),a2p=a2*(1+G),C1p=delta_e_sqrt(delta_e_pow(a1p,2)+delta_e_pow(b1,2)),C2p=delta_e_sqrt(delta_e_pow(a2p,2)+delta_e_pow(b2,2)),avgCp=(C1p+C2p)/2,arctan1=rad2deg(delta_e_atan2(b1,a1p)),arctan2=rad2deg(delta_e_atan2(b2,a2p)),h1p=arctan1>=0?arctan1:arctan1+360,h2p=arctan2>=0?arctan2:arctan2+360,avgHp=delta_e_abs(h1p-h2p)>180?(h1p+h2p+360)/2:(h1p+h2p)/2,T=1-.17*delta_e_cos(deg2rad(avgHp-30))+.24*delta_e_cos(deg2rad(2*avgHp))+.32*delta_e_cos(deg2rad(3*avgHp+6))-.2*delta_e_cos(deg2rad(4*avgHp-63));let deltaHp=h2p-h1p;deltaHp=delta_e_abs(deltaHp)<=180?deltaHp:h2p<=h1p?deltaHp+360:deltaHp-360,deltaHp=2*delta_e_sqrt(C1p*C2p)*delta_e_sin(deg2rad(deltaHp)/2);const deltaL=L2-L1,deltaCp=C2p-C1p,sl=1+.015*delta_e_pow(avgL-50,2)/delta_e_sqrt(20+delta_e_pow(avgL-50,2)),sc=1+.045*avgCp,sh=1+.015*avgCp*T,deltaTheta=30*exp(-delta_e_pow((avgHp-275)/25,2)),Rt=-(2*delta_e_sqrt(delta_e_pow(avgCp,7)/(delta_e_pow(avgCp,7)+delta_e_pow(25,7))))*delta_e_sin(2*deg2rad(deltaTheta)),result=delta_e_sqrt(delta_e_pow(deltaL/(Kl*sl),2)+delta_e_pow(deltaCp/(Kc*sc),2)+delta_e_pow(deltaHp/(Kh*sh),2)+Rt*(deltaCp/(Kc*sc))*(deltaHp/(Kh*sh)));return delta_e_max(0,delta_e_min(100,result))},distance:function distance(a,b,mode="lab"){a=new src_Color(a),b=new src_Color(b);const l1=a.get(mode),l2=b.get(mode);let sum_sq=0;for(let i in l1){const d=(l1[i]||0)-(l2[i]||0);sum_sq+=d*d}return Math.sqrt(sum_sq)},input,interpolate:mix,limits,mix,random:(rng=random)=>{let code="#";for(let i=0;i<6;i++)code+="0123456789abcdef".charAt(random_floor(16*rng()));return new src_Color(code,"hex")},scale,scales,valid:(...args)=>{try{return new src_Color(...args),!0}catch(e){return!1}}});const chroma_js=src_chroma}}]);